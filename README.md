# pH Sensor Extension v1.0.0

**Analog pH Sensor for MicroBlock/MicroPython**

Linear Calibration with Standard pH Buffer Method (pH 4.01 & 6.86)

---

## üìñ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

Extension ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤ pH ‡∏î‡πâ‡∏ß‡∏¢ Analog pH Sensor ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£ Calibrate ‡πÅ‡∏ö‡∏ö 2 ‡∏à‡∏∏‡∏î (Two-Point Calibration)

### ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏Æ‡πÇ‡∏î‡∏£‡πÇ‡∏õ‡∏ô‡∏¥‡∏Å‡∏™‡πå (Hydroponics)
- ‚úÖ ‡∏ï‡∏π‡πâ‡∏õ‡∏•‡∏≤ (Aquarium)
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥
- ‚úÖ ‡∏á‡∏≤‡∏ô‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå
- ‚úÖ ‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ (Smart Farming)

---

## üåü ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥

1. **Linear Calibration**
   - ‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á: pH = m*V + c
   - Standard pH Buffer Calibration (pH 4.01 ‡πÅ‡∏•‡∏∞ 6.86)
   - Auto-save calibration

2. **Median Filtering**
   - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ 10 samples
   - ‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥
   - ‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£

3. **Error Detection & Status Monitoring** ‚≠ê **‡πÉ‡∏´‡∏°‡πà!**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö sensor ‡πÑ‡∏°‡πà‡∏à‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏ô‡πâ‡∏≥
   - ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì
   - ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ OK/Warning/Error

4. **12 Blockly Blocks** (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 10 blocks)
   - ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
   - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
   - Calibrate ‡πÑ‡∏î‡πâ‡πÉ‡∏ô Block
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ sensor

5. **Dual API**
   - Simple API
   - Class API

---

## üîå ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Hardware

### ‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢:

```
pH Sensor       ‚Üí    ESP32
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
VCC (Red)       ‚Üí    5V
GND (Black)     ‚Üí    GND
Signal (Blue)   ‚Üí    GPIO 35
```

### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:
- ‡πÉ‡∏ä‡πâ **GPIO 32-39** (ADC1)
- pH Sensor ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ **5V** (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 3.3V)
- ‡∏≠‡∏¢‡πà‡∏≤‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÅ‡∏´‡πâ‡∏á
- ‡∏´‡∏≤‡∏Å pH buffer 4.0 ‡πÉ‡∏´‡πâ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 3.25V ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ**‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡πâ‡∏≤‡∏ô‡∏ó‡∏≤‡∏ô‡∏•‡∏á**‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ

---

## üì¶ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå

```
ph-sensor/
‚îú‚îÄ‚îÄ ph_extension.js      # Extension config
‚îú‚îÄ‚îÄ ph_blocks.js         # Blockly blocks
‚îú‚îÄ‚îÄ ph_generators.js     # Python generators
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îî‚îÄ‚îÄ ph_sensor.py     # Python module
‚îî‚îÄ‚îÄ README.md           # ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ
```

---

## üöÄ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### Simplified API:

```python
import ph_sensor

# ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ pH
ph = ph_sensor.get_ph_value(35)
print(f"pH: {ph}")

# ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô
voltage = ph_sensor.get_voltage(35)
print(f"Voltage: {voltage} V")

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Sensor (‡πÉ‡∏´‡∏°‡πà!)
if ph_sensor.is_sensor_ok(35):
    print("Sensor ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥")
else:
    ph_sensor.check_sensor(35)  # ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
```

### Class API (Arduino Style):

```python
import ph_sensor
import time

# Setup
sensor = ph_sensor.init(pin=35)

# Loop
while True:
    sensor.update()
    
    # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ sensor
    if sensor.is_sensor_ok():
        ph = sensor.get_ph_value()
        print(f"pH: {ph:.2f}")
    else:
        status, message = sensor.get_sensor_status()
        print(f"‚ö†Ô∏è Sensor {status}: {message}")
    
    time.sleep(1)
```

---

## ‚ö†Ô∏è Error Handling

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö pH Sensor ‡πÑ‡∏°‡πà‡∏à‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏ô‡πâ‡∏≥:

- **‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏™‡∏π‡∏á (‚â• 3.3V)**: Sensor ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏à‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏ô‡πâ‡∏≥ - ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏à‡∏∏‡πà‡∏° electrode ‡πÉ‡∏´‡πâ‡∏°‡∏¥‡∏î

### üîß ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ:

‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏ß‡πà‡∏≤ **pH buffer 4.0 ‡πÉ‡∏´‡πâ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ 3.2V** ‡∏°‡∏µ 2 ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:

1. **‡∏õ‡∏£‡∏±‡∏ö threshold ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î** (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
   ```python
   # ‡πÉ‡∏ä‡πâ 3.3V (VREF ‡∏Ç‡∏≠‡∏á ESP32) ‡πÄ‡∏õ‡πá‡∏ô threshold ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
   self._max_valid_voltage = 3.3  # ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
   ```

2. **‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡πâ‡∏≤‡∏ô‡∏ó‡∏≤‡∏ô‡πÉ‡∏ô pH sensor module ‡∏•‡∏á**
   - ‡∏´‡∏°‡∏∏‡∏ô‡∏ó‡∏ß‡∏ô‡πÄ‡∏Ç‡πá‡∏°‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô  
   - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö pH buffer 4.0 ‡πÅ‡∏•‡∏∞ 7.0 ‡πÉ‡∏´‡∏°‡πà
   - ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 1.5-3.0V
   - **‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ï‡πâ‡∏≠‡∏á calibrate ‡πÉ‡∏´‡∏°‡πà‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡πâ‡∏≤‡∏ô‡∏ó‡∏≤‡∏ô**

### üéØ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡πâ‡∏≤‡∏ô‡∏ó‡∏≤‡∏ô:

- ‚úÖ **‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°** (‡∏´‡∏•‡∏±‡∏á calibrate ‡πÉ‡∏´‡∏°‡πà)
- ‚úÖ **‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô** 
- üîÑ **Slope ‡πÅ‡∏•‡∏∞ Intercept ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô** (‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà)
- üìè **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô** (‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°)

### üìù ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡πâ‡∏≤‡∏ô‡∏ó‡∏≤‡∏ô:

```python
import ph_sensor

sensor = ph_sensor.init(pin=35)

# 1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà
sensor.update()  
print(f"pH 4.01 voltage: {sensor.get_voltage()}")  # ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ 2.6-2.9V

# 2. Calibrate ‡πÉ‡∏´‡∏°‡πà
ph401_voltage = 2.8  # ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å pH 4.01
ph686_voltage = 2.1  # ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å pH 6.86
sensor.calibrate_two_point(ph401_voltage, ph686_voltage)

# 3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
ph = sensor.get_ph_value()
print(f"pH: {ph}")  # ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
```

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Sensor:
- ‚úÖ **OK**: sensor ‡∏à‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- ‚ùå **Error**: sensor ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏à‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏ô‡πâ‡∏≥

```python
# ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
import ph_sensor

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢
ph_sensor.check_sensor(35)  # ‚úÖ OK ‡∏´‡∏£‡∏∑‡∏≠ ‚ùå Error

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
if ph_sensor.is_sensor_ok(35):
    ph = ph_sensor.get_ph_value(35)
    print(f"pH: {ph}")
else:
    status = ph_sensor.get_sensor_status(35)
    print(f"Error: {status['message']}")
```

---

## üß© Blockly Blocks

### 12 Blocks ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:

1. **‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ pH ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡πÅ‡∏î‡∏á
2. **‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô pH Sensor ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á
3. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Calibration Slope [m] Intercept [c]** - ‡∏™‡∏µ‡∏™‡πâ‡∏°
4. **Calibrate 3 ‡∏à‡∏∏‡∏î ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á (pH 4.01, 6.86, 9.18)** - ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
5. **Calibrate 2 ‡∏à‡∏∏‡∏î (pH 4.01, 6.86)** - ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô  
6. **Calibrate Offset (‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤)** - ‡∏™‡∏µ‡∏™‡πâ‡∏°
7. **‡∏î‡∏π‡∏Ñ‡πà‡∏≤ pH Calibration** - ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤
8. **‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ pH ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Dict) ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡∏ü‡πâ‡∏≤
9. **‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤ pH Sensor ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°
10. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö pH [value]** - ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•
11. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ pH Sensor ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡∏™‡πâ‡∏°‡∏ó‡∏≠‡∏á
12. **‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ pH Sensor ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡πÅ‡∏î‡∏á

---

## üî¨ ‡∏Å‡∏≤‡∏£ Calibrate

### Standard pH Buffer Calibration

‡∏Å‡∏≤‡∏£ Calibrate pH Sensor ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô:
- **pH 4.01 Buffer Solution** (‡∏™‡∏µ‡πÅ‡∏î‡∏á/‡∏ä‡∏°‡∏û‡∏π)
- **pH 6.86 Buffer Solution** (‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á/‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô Calibrate:

```python
import ph_sensor

sensor = ph_sensor.init(pin=35)

# Step 1: ‡∏à‡∏∏‡πà‡∏°‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏ô pH 4.01 buffer (‡∏™‡∏µ‡πÅ‡∏î‡∏á)
# ‡∏£‡∏≠ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
sensor.update()
ph401_voltage = sensor.get_voltage()
print(f"pH 4.01 voltage: {ph401_voltage}")

# Step 2: ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏Å‡∏•‡∏±‡πà‡∏ô
# ‡∏à‡∏∏‡πà‡∏°‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏ô pH 6.86 buffer (‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á/‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)
# ‡∏£‡∏≠ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
sensor.update()
ph686_voltage = sensor.get_voltage()
print(f"pH 6.86 voltage: {ph686_voltage}")

# Step 3: Calibrate
sensor.calibrate_two_point(ph401_voltage, ph686_voltage)

# Output:
# ==================================================
# Two-Point Calibration Complete!
# ==================================================
# pH 4.01 voltage:  2.75 V
# pH 6.86 voltage:  2.10 V
# New Slope (m):   -6.0000
# New Intercept (c): 19.0000
# ==================================================
```

### üéØ **3-Point Calibration (‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î):**

```python
import ph_sensor

sensor = ph_sensor.init(pin=35)

# ‡πÉ‡∏ä‡πâ pH buffer 3 ‡∏Ñ‡πà‡∏≤: 4.01, 6.86, 9.18
ph401_voltage = 2.8  # ‡∏ß‡∏±‡∏î‡∏à‡∏≤‡∏Å pH 4.01 buffer  
ph686_voltage = 2.1  # ‡∏ß‡∏±‡∏î‡∏à‡∏≤‡∏Å pH 6.86 buffer
ph918_voltage = 1.4  # ‡∏ß‡∏±‡∏î‡∏à‡∏≤‡∏Å pH 9.18 buffer

sensor.calibrate_three_point(ph401_voltage, ph686_voltage, ph918_voltage)
print("‚úÖ 3-Point Calibration ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!")

# Output:
# ==================================================
# Three-Point Calibration Complete!
# ==================================================
# pH 4.01 voltage:  2.80 V
# pH 6.86 voltage:  2.10 V  
# pH 9.18 voltage:  1.40 V
# New Slope (m):   -3.4500
# New Intercept (c): 14.6600
# ==================================================
```

### ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Blockly:

```blockly
// Step 1: ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô pH 4.01  
ph401_v = ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô pH Sensor ‡∏Ç‡∏≤ [35]

// Step 2: ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô pH 6.86
ph686_v = ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô pH Sensor ‡∏Ç‡∏≤ [35]  

// Step 3: Calibrate
Calibrate pH 2 ‡∏à‡∏∏‡∏î ‡∏Ç‡∏≤ [35] ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô pH 4.01 [ph401_v] ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô pH 6.86 [ph686_v]
```

---

## üìä ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô pH

### ‡∏£‡∏∞‡∏î‡∏±‡∏ö pH:

| ‡∏£‡∏∞‡∏î‡∏±‡∏ö pH | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á |
|----------|----------|----------|
| 0-3 | ‡∏Å‡∏£‡∏î‡∏à‡∏±‡∏î | ‡∏Å‡∏£‡∏î‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà, ‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏° |
| 3-6 | ‡∏Å‡∏£‡∏î‡∏≠‡πà‡∏≠‡∏ô | ‡∏Å‡∏≤‡πÅ‡∏ü, ‡∏°‡∏∞‡∏ô‡∏≤‡∏ß |
| 7 | ‡∏Å‡∏•‡∏≤‡∏á (Neutral) | ‡∏ô‡πâ‡∏≥‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå |
| 8-10 | ‡∏î‡πà‡∏≤‡∏á‡∏≠‡πà‡∏≠‡∏ô | ‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•, ‡∏™‡∏ö‡∏π‡πà |
| 10-14 | ‡∏î‡πà‡∏≤‡∏á‡∏à‡∏±‡∏î | ‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏ã‡∏±‡∏Å‡∏ú‡πâ‡∏≤ |

### pH ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏Æ‡πÇ‡∏î‡∏£‡πÇ‡∏õ‡∏ô‡∏¥‡∏Å‡∏™‡πå:

| ‡∏û‡∏∑‡∏ä | pH ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° |
|-----|---------------|
| ‡∏ú‡∏±‡∏Å‡∏™‡∏•‡∏±‡∏î | 5.5-6.5 |
| ‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏® | 5.5-6.5 |
| ‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà | 5.5-6.5 |
| ‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤ | 5.5-7.0 |
| ‡∏û‡∏£‡∏¥‡∏Å | 6.0-6.5 |

### pH ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏π‡πâ‡∏õ‡∏•‡∏≤:

| ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | pH ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° |
|--------|---------------|
| ‡∏õ‡∏•‡∏≤‡∏ô‡πâ‡∏≥‡∏à‡∏∑‡∏î | 6.5-7.5 |
| ‡∏õ‡∏•‡∏≤‡∏ó‡∏∞‡πÄ‡∏• | 8.0-8.4 |
| ‡∏Å‡∏∏‡πâ‡∏á | 7.0-8.0 |
| ‡∏õ‡∏∞‡∏Å‡∏≤‡∏£‡∏±‡∏á | 8.1-8.4 |

---

## üí° ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

### 1. ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° pH ‡πÑ‡∏Æ‡πÇ‡∏î‡∏£‡πÇ‡∏õ‡∏ô‡∏¥‡∏Å‡∏™‡πå

```python
import ph_sensor
import machine
import time

# Setup
sensor = ph_sensor.init(pin=35)
pump_ph_down = machine.Pin(26, machine.Pin.OUT)  # ‡∏õ‡∏±‡πä‡∏°‡∏•‡∏î pH
pump_ph_up = machine.Pin(27, machine.Pin.OUT)    # ‡∏õ‡∏±‡πä‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏° pH

# Target pH range (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏±‡∏Å‡∏™‡∏•‡∏±‡∏î)
TARGET_PH_MIN = 5.5
TARGET_PH_MAX = 6.5

while True:
    sensor.update()
    ph = sensor.get_ph_value()
    
    print(f"pH: {ph:.2f}", end=" ")
    
    if ph < TARGET_PH_MIN:
        print("‚ö†Ô∏è pH ‡∏ï‡πà‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ - ‡πÄ‡∏û‡∏¥‡πà‡∏° pH UP")
        pump_ph_up.on()
        time.sleep(2)  # ‡∏õ‡∏±‡πä‡∏° 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        pump_ph_up.off()
        time.sleep(300)  # ‡∏£‡∏≠ 5 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÉ‡∏´‡πâ‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ô
        
    elif ph > TARGET_PH_MAX:
        print("‚ö†Ô∏è pH ‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ - ‡πÄ‡∏û‡∏¥‡πà‡∏° pH DOWN")
        pump_ph_down.on()
        time.sleep(2)
        pump_ph_down.off()
        time.sleep(300)
        
    else:
        print("‚úÖ pH ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°")
    
    time.sleep(600)  # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ
```

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°

```python
import ph_sensor

sensor = ph_sensor.init(pin=35)

while True:
    sensor.update()
    ph = sensor.get_ph_value()
    
    # ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà pH 6.5-8.5)
    if ph < 6.5:
        quality = "‡∏Å‡∏£‡∏î‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‚ùå"
    elif ph <= 8.5:
        quality = "‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‚úÖ"
    else:
        quality = "‡∏î‡πà‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‚ùå"
    
    print(f"pH: {ph:.2f} | {quality}")
    time.sleep(5)
```

---

## üõ†Ô∏è Troubleshooting

### ‚ùì ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

#### 1. ‡∏Ñ‡πà‡∏≤ pH ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÅ‡∏´‡πâ‡∏á  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: ‡πÅ‡∏ä‡πà‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡∏Å‡∏•‡∏±‡πà‡∏ô 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á

#### 2. ‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà Calibrate  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: Calibrate ‡∏î‡πâ‡∏ß‡∏¢ pH 4.01 ‡πÅ‡∏•‡∏∞ pH 6.86

#### 3. ‡∏Ñ‡πà‡∏≤‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏Å
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏£‡∏ö‡∏Å‡∏ß‡∏ô  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏±‡πâ‡∏ô‡∏•‡∏á ‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå

#### 4. ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢‡∏ú‡∏¥‡∏î  
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Signal ‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡πà GPIO 35

---

## üìù Best Practices

### ‚úÖ ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥:
1. Calibrate ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
2. Calibrate ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å 1-2 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
3. ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡∏Å‡∏•‡∏±‡πà‡∏ô‡πÄ‡∏™‡∏°‡∏≠
4. ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡πà‡∏≤‡∏ô (30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
5. ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Calibrate

### ‚ùå ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥:
1. ‡∏≠‡∏¢‡πà‡∏≤‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÅ‡∏´‡πâ‡∏á
2. ‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡∏£‡πâ‡∏≠‡∏ô >60¬∞C
3. ‡∏≠‡∏¢‡πà‡∏≤‡∏Ç‡∏π‡∏î‡∏´‡∏±‡∏ß‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
4. ‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡πÅ‡∏£‡∏á‡∏•‡πâ‡∏≤‡∏á
5. ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏ô‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡∏ô‡∏≤‡∏ô >1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á

---

## üìö API Reference

### Class API
```python
sensor = PHSensor()
sensor.set_pin(35)
sensor.begin()
sensor.update()
ph = sensor.get_ph_value()
voltage = sensor.get_voltage()
sensor.calibrate_two_point(ph4_v, ph7_v)
sensor.set_calibration(slope, intercept)
sensor.print_info()
```

### Simplified API
```python
ph = get_ph_value(pin)
voltage = get_voltage(pin)
calibrate_two_point(pin, ph4_v, ph7_v)
set_calibration(slope, intercept)
print_readings(pin)
```

---

## üîó ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- pH Buffer Solutions: [Amazon](https://www.amazon.com/s?k=pH+calibration+buffer)
- ESP32 ADC: [Documentation](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/adc.html)

---

## üìÑ License

MIT License

---

## üë§ Author

**Cap_Apiluk**
- Version: 1.0.0
- Category: Sensor

---

**Happy Measuring! üß™**

